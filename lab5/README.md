# Лаба 5

Цель: создание UART приёмника и передатчика, которые взаимодействуют с семисегментным индикатором из 8 чисел. Также число можно менять по кнопкам.
                         
Данный этап провожу в симуляции.

Я начала с передатчика (transmitter). У него есть триггер, по которому отправляются 8-битные данные. Машина состояний переходит между idle, start_bit, data_sending, stop_bit.
Переходы корректные, если смотреть на периоде 2 с.

Можно добавить выход из модуля передатчика: флаг TC -- transmission complete. И его буду сбрасывать.

Оттестирован и приёмник (receiver). Далее начала симулировать передачу данных 8-ю числами, то есть 4 посылки по UART. Здесь есть неточность:
 UART приёмник нескольких посылок подряд работает только если между stop bit и следующим start bit есть 1 бит idle. Но вообще можно
 это интерпретировать как 2 stop bit.

Сейчас пытаюсь симулировать передачу этих 8 чисел и связать это с взаимодействием с индикатором. При переходе к симуляции приёма
 нескольких пакетов был добавлен флаг ready (потом переименовать в RXNE).

TODO: refactor: input wire/reg: add prefix i_, output: prefix o_

## Модули:

- transmitter

UART отправитель. На него идёт "массив" (шина) данных, из него выходит однобитная линия. Написан на FSM (состояния: idle, start_bit, data_sending, stop_bit).
 Переходы -- по тактам. В самой лабе он будет передавать данные о текущем числе с ПЛИС на комп. Отправляет 8 бит данных за раз (= 2 десятичных цифры).

- receiver

UART приёмник. На него идёт однобитная линия, из него получается шина данных. Написан на FSM (состояния: idle, start_bit, data_sending, stop_bit).
 Переходы осуществляются по отлову падающего фронта линии и по тактам. Принимает 8 бит данных за раз (= 2 десятичных цифры).

- prescaler; prescaler_rx

Модули для получения тактовой частоты на приёмнике и передатчике из 27 МГц. Эти модули разнесены, так как в общем случае RX и TX могут находиться на разных устройствах. 

- receive8num

Этот модуль использует модуль receiver и принимает с помощью этого модуля партию из 8 десятичных цифр (т.е. 4 посылки).
 Также он возвращает данные в удобном виде для их отправки на модуль дисплея.

- display

Этот модуль принимает массив из 8 шин по 4 бита. То есть 8 десятичных цифр. И отображает на 7-сегментном индикаторе.

- top

Этот модуль связывает работу всех предыдущих.

Получили 8 десятичных цифр по UART модулем receive8num. В идеале после этого добавить валидацию (вдруг человек прислал 1010 и больше).
 Дальше отправили полученное на display. Также добавить обработку кнопок SW_pos, SW_neg. Можно что-то типа только по положительному
 фронту линии кнопки изменять значение. Ну и при изменении числа -- отправить его обратно по UART с помощью transmitter.
 Возможно, удобно будет написать модуль transmit8num.

- lab5_tb

testbench для симуляции.


                                                 